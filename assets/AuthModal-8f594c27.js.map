{"version":3,"file":"AuthModal-8f594c27.js","sources":["../../src/ui/AuthModal.ts"],"sourcesContent":["import { authManager } from '../systems/AuthManager'\r\nimport { languageManager } from '../i18n/LanguageManager'\r\n\r\nexport class AuthModal {\r\n  private element: HTMLElement\r\n  private onAuthCallback?: (success: boolean) => void\r\n  private currentStep: 'welcome' | 'email' | 'verify' | 'profile' = 'welcome'\r\n  private currentEmail: string = ''\r\n\r\n  constructor() {\r\n    this.element = this.createElement()\r\n    this.setupEventListeners()\r\n    this.setupLanguageListener()\r\n    document.body.appendChild(this.element)\r\n  }\r\n\r\n  private createElement(): HTMLElement {\r\n    const modal = document.createElement('div')\r\n    modal.id = 'auth-modal'\r\n    modal.className = 'auth-modal hidden'\r\n    modal.innerHTML = this.getModalHTML()\r\n    return modal\r\n  }\r\n\r\n  private getModalHTML(): string {\r\n    const t = languageManager.getTranslation()\r\n    return `\r\n      <div class=\"auth-modal-backdrop\">\r\n        <div class=\"auth-modal-content\">\r\n          <!-- Welcome Step -->\r\n          <div class=\"auth-step\" id=\"auth-step-welcome\">\r\n            <h2>${t.authWelcome}</h2>\r\n            <p>${t.authSignInToPlay}</p>\r\n\r\n            <div class=\"auth-buttons\">\r\n              <button id=\"auth-google\" class=\"auth-button auth-button-google\">\r\n                <span>üîç</span> ${t.authContinueGoogle}\r\n              </button>\r\n\r\n              <button id=\"auth-email\" class=\"auth-button auth-button-email\">\r\n                <span>üìß</span> ${t.authContinueEmail}\r\n              </button>\r\n            </div>\r\n\r\n            <button id=\"auth-close\" class=\"auth-close-btn\">√ó</button>\r\n          </div>\r\n\r\n          <!-- Email Step -->\r\n          <div class=\"auth-step hidden\" id=\"auth-step-email\">\r\n            <h2>${t.authEmailTitle}</h2>\r\n            <p>${t.authEmailSubtitle}</p>\r\n\r\n            <div class=\"auth-form\">\r\n              <input\r\n                type=\"email\"\r\n                id=\"auth-email-input\"\r\n                placeholder=\"${t.authEmailPlaceholder}\"\r\n                class=\"auth-input\"\r\n              >\r\n              <button id=\"auth-send-otp\" class=\"auth-button auth-button-primary\">\r\n                ${t.authSendCode}\r\n              </button>\r\n              <button id=\"auth-back-welcome\" class=\"auth-button auth-button-secondary\">\r\n                ${t.authBack}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Verify Step -->\r\n          <div class=\"auth-step hidden\" id=\"auth-step-verify\">\r\n            <h2>${t.authVerifyTitle}</h2>\r\n            <p>${t.authVerifySubtitle}</p>\r\n\r\n            <div class=\"auth-form\">\r\n              <input\r\n                type=\"text\"\r\n                id=\"auth-otp-input\"\r\n                placeholder=\"${t.authOtpPlaceholder}\"\r\n                class=\"auth-input auth-input-otp\"\r\n                maxlength=\"6\"\r\n              >\r\n              <button id=\"auth-verify-otp\" class=\"auth-button auth-button-primary\">\r\n                ${t.authVerify}\r\n              </button>\r\n              <button id=\"auth-back-email\" class=\"auth-button auth-button-secondary\">\r\n                ${t.authBack}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Profile Setup Step -->\r\n          <div class=\"auth-step hidden\" id=\"auth-step-profile\">\r\n            <h2>${t.authProfileTitle}</h2>\r\n            <p>${t.authProfileSubtitle}</p>\r\n\r\n            <div class=\"auth-form\">\r\n              <input\r\n                type=\"text\"\r\n                id=\"auth-nickname-input\"\r\n                placeholder=\"${t.authNicknamePlaceholder}\"\r\n                class=\"auth-input\"\r\n                maxlength=\"20\"\r\n              >\r\n\r\n              <div class=\"consent-checkbox\">\r\n                <label>\r\n                  <input type=\"checkbox\" id=\"marketing-consent\" class=\"auth-checkbox\">\r\n                  ${t.authMarketingConsent}\r\n                </label>\r\n              </div>\r\n\r\n              <button id=\"auth-complete\" class=\"auth-button auth-button-primary\">\r\n                ${t.authStartPlaying}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Loading overlay -->\r\n          <div class=\"auth-loading hidden\" id=\"auth-loading\">\r\n            <div class=\"spinner\"></div>\r\n            <p>${t.authProcessing}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `\r\n  }\r\n\r\n  private setupEventListeners(): void {\r\n    // Close modal\r\n    this.element.querySelector('#auth-close')?.addEventListener('click', () => {\r\n      this.hide()\r\n    })\r\n\r\n    // Google sign in\r\n    this.element.querySelector('#auth-google')?.addEventListener('click', async () => {\r\n      await this.handleGoogleSignIn()\r\n    })\r\n\r\n    // Email flow\r\n    this.element.querySelector('#auth-email')?.addEventListener('click', () => {\r\n      this.showStep('email')\r\n    })\r\n\r\n    this.element.querySelector('#auth-send-otp')?.addEventListener('click', async () => {\r\n      await this.handleSendOTP()\r\n    })\r\n\r\n    this.element.querySelector('#auth-verify-otp')?.addEventListener('click', async () => {\r\n      await this.handleVerifyOTP()\r\n    })\r\n\r\n    // Navigation\r\n    this.element.querySelector('#auth-back-welcome')?.addEventListener('click', () => {\r\n      this.showStep('welcome')\r\n    })\r\n\r\n    this.element.querySelector('#auth-back-email')?.addEventListener('click', () => {\r\n      this.showStep('email')\r\n    })\r\n\r\n    // Profile completion\r\n    this.element.querySelector('#auth-complete')?.addEventListener('click', async () => {\r\n      await this.handleCompleteProfile()\r\n    })\r\n\r\n    // Click outside to close\r\n    this.element.querySelector('.auth-modal-backdrop')?.addEventListener('click', (e) => {\r\n      if (e.target === e.currentTarget) {\r\n        this.hide()\r\n      }\r\n    })\r\n\r\n    // Enter key handling\r\n    this.element.addEventListener('keydown', (e) => {\r\n      if (e.key === 'Escape') {\r\n        this.hide()\r\n      }\r\n      if (e.key === 'Enter') {\r\n        this.handleEnterKey()\r\n      }\r\n    })\r\n  }\r\n\r\n  private setupLanguageListener(): void {\r\n    languageManager.onLanguageChange(() => {\r\n      // Recreate modal content with new translations\r\n      this.element.innerHTML = this.getModalHTML()\r\n      // Re-setup event listeners since we recreated the HTML\r\n      this.setupEventListeners()\r\n      // Restore current step\r\n      this.showStep(this.currentStep)\r\n    })\r\n  }\r\n\r\n  private async handleGoogleSignIn(): Promise<void> {\r\n    this.showLoading(true)\r\n\r\n    try {\r\n      const result = await authManager.signInWithGoogle()\r\n\r\n      if (result.success) {\r\n        // Google OAuth will redirect, so we just wait\r\n        console.log('Google sign in initiated')\r\n      } else {\r\n        const t = languageManager.getTranslation()\r\n        this.showError(result.error || t.authGoogleFailed)\r\n        this.showLoading(false)\r\n      }\r\n    } catch (error) {\r\n      console.error('Google sign in error:', error)\r\n      const t = languageManager.getTranslation()\r\n      this.showError(t.authUnexpectedError)\r\n      this.showLoading(false)\r\n    }\r\n  }\r\n\r\n  private async handleSendOTP(): Promise<void> {\r\n    const emailInput = this.element.querySelector('#auth-email-input') as HTMLInputElement\r\n    const email = emailInput?.value.trim()\r\n\r\n    if (!email || !email.includes('@')) {\r\n      const t = languageManager.getTranslation()\r\n      this.showError(t.authInvalidEmail)\r\n      return\r\n    }\r\n\r\n    this.currentEmail = email\r\n    this.showLoading(true)\r\n\r\n    try {\r\n      const result = await authManager.signInWithOTP(email)\r\n\r\n      if (result.success) {\r\n        this.showStep('verify')\r\n        const t = languageManager.getTranslation()\r\n        this.showSuccess(t.authCodeSent)\r\n      } else {\r\n        const t = languageManager.getTranslation()\r\n        this.showError(result.error || t.authSendFailed)\r\n      }\r\n    } catch (error) {\r\n      console.error('Send OTP error:', error)\r\n      const t = languageManager.getTranslation()\r\n      this.showError(t.authUnexpectedError)\r\n    } finally {\r\n      this.showLoading(false)\r\n    }\r\n  }\r\n\r\n  private async handleVerifyOTP(): Promise<void> {\r\n    const otpInput = this.element.querySelector('#auth-otp-input') as HTMLInputElement\r\n    const token = otpInput?.value.trim()\r\n\r\n    if (!token || token.length !== 6) {\r\n      const t = languageManager.getTranslation()\r\n      this.showError(t.authCodeLength)\r\n      return\r\n    }\r\n\r\n    this.showLoading(true)\r\n\r\n    try {\r\n      const result = await authManager.verifyOTP(this.currentEmail, token)\r\n\r\n      if (result.success) {\r\n        // Wait for auth state to update\r\n        await new Promise(resolve => setTimeout(resolve, 1000))\r\n\r\n        const state = authManager.getState()\r\n        if (state.isAuthenticated) {\r\n          if (state.profile?.nickname) {\r\n            // User already has profile, complete\r\n            this.completeAuth(true)\r\n          } else {\r\n            // Show profile setup\r\n            this.showStep('profile')\r\n          }\r\n        } else {\r\n          const t = languageManager.getTranslation()\r\n          this.showError(t.authFailed)\r\n        }\r\n      } else {\r\n        const t = languageManager.getTranslation()\r\n        this.showError(result.error || t.authInvalidCode)\r\n      }\r\n    } catch (error) {\r\n      console.error('Verify OTP error:', error)\r\n      const t = languageManager.getTranslation()\r\n      this.showError(t.authVerifyFailed)\r\n    } finally {\r\n      this.showLoading(false)\r\n    }\r\n  }\r\n\r\n  private async handleCompleteProfile(): Promise<void> {\r\n    const nicknameInput = this.element.querySelector('#auth-nickname-input') as HTMLInputElement\r\n    const consentInput = this.element.querySelector('#marketing-consent') as HTMLInputElement\r\n\r\n    const nickname = nicknameInput?.value.trim() || null\r\n    const hasConsent = consentInput?.checked || false\r\n\r\n    this.showLoading(true)\r\n\r\n    try {\r\n      await authManager.updateProfile({\r\n        nickname,\r\n        consent_marketing: hasConsent,\r\n        consent_timestamp: hasConsent ? new Date().toISOString() : null\r\n      })\r\n\r\n      this.completeAuth(true)\r\n    } catch (error) {\r\n      console.error('Profile update error:', error)\r\n      const t = languageManager.getTranslation()\r\n      this.showError(t.authProfileFailed)\r\n      this.showLoading(false)\r\n    }\r\n  }\r\n\r\n  private showStep(step: typeof this.currentStep): void {\r\n    // Hide all steps\r\n    this.element.querySelectorAll('.auth-step').forEach(el => {\r\n      el.classList.add('hidden')\r\n    })\r\n\r\n    // Show target step\r\n    const stepElement = this.element.querySelector(`#auth-step-${step}`)\r\n    if (stepElement) {\r\n      stepElement.classList.remove('hidden')\r\n      this.currentStep = step\r\n\r\n      // Focus first input in new step\r\n      const firstInput = stepElement.querySelector('input') as HTMLInputElement\r\n      if (firstInput) {\r\n        setTimeout(() => firstInput.focus(), 100)\r\n      }\r\n    }\r\n  }\r\n\r\n  private showLoading(show: boolean): void {\r\n    const loading = this.element.querySelector('#auth-loading')\r\n    if (loading) {\r\n      loading.classList.toggle('hidden', !show)\r\n    }\r\n  }\r\n\r\n  private showError(message: string): void {\r\n    // Remove existing alerts\r\n    this.element.querySelectorAll('.auth-alert').forEach(el => el.remove())\r\n\r\n    const alert = document.createElement('div')\r\n    alert.className = 'auth-alert auth-alert-error'\r\n    alert.textContent = message\r\n\r\n    const currentStep = this.element.querySelector(`.auth-step:not(.hidden)`)\r\n    if (currentStep) {\r\n      currentStep.insertBefore(alert, currentStep.firstChild)\r\n    }\r\n\r\n    // Auto-remove after 5 seconds\r\n    setTimeout(() => alert.remove(), 5000)\r\n  }\r\n\r\n  private showSuccess(message: string): void {\r\n    // Remove existing alerts\r\n    this.element.querySelectorAll('.auth-alert').forEach(el => el.remove())\r\n\r\n    const alert = document.createElement('div')\r\n    alert.className = 'auth-alert auth-alert-success'\r\n    alert.textContent = message\r\n\r\n    const currentStep = this.element.querySelector(`.auth-step:not(.hidden)`)\r\n    if (currentStep) {\r\n      currentStep.insertBefore(alert, currentStep.firstChild)\r\n    }\r\n\r\n    // Auto-remove after 3 seconds\r\n    setTimeout(() => alert.remove(), 3000)\r\n  }\r\n\r\n  private handleEnterKey(): void {\r\n    switch (this.currentStep) {\r\n      case 'email':\r\n        this.element.querySelector('#auth-send-otp')?.dispatchEvent(new Event('click'))\r\n        break\r\n      case 'verify':\r\n        this.element.querySelector('#auth-verify-otp')?.dispatchEvent(new Event('click'))\r\n        break\r\n      case 'profile':\r\n        this.element.querySelector('#auth-complete')?.dispatchEvent(new Event('click'))\r\n        break\r\n    }\r\n  }\r\n\r\n  private completeAuth(success: boolean): void {\r\n    if (this.onAuthCallback) {\r\n      this.onAuthCallback(success)\r\n    }\r\n    this.hide()\r\n  }\r\n\r\n  // Public API\r\n  public show(): void {\r\n    this.element.classList.remove('hidden')\r\n    this.showStep('welcome')\r\n\r\n    // Focus management\r\n    setTimeout(() => {\r\n      const firstButton = this.element.querySelector('.auth-button') as HTMLElement\r\n      firstButton?.focus()\r\n    }, 100)\r\n  }\r\n\r\n  public hide(): void {\r\n    this.element.classList.add('hidden')\r\n    // Don't call completeAuth here to avoid infinite loop\r\n  }\r\n\r\n  public onAuth(callback: (success: boolean) => void): void {\r\n    this.onAuthCallback = callback\r\n  }\r\n\r\n  public destroy(): void {\r\n    if (this.element && this.element.parentNode) {\r\n      this.element.parentNode.removeChild(this.element)\r\n    }\r\n  }\r\n}"],"names":["AuthModal","__publicField","modal","languageManager","_a","_b","_c","_d","_e","_f","_g","_h","_i","e","result","authManager","t","error","emailInput","email","otpInput","token","resolve","state","nicknameInput","consentInput","nickname","hasConsent","step","el","stepElement","firstInput","show","loading","message","alert","currentStep","success","firstButton","callback"],"mappings":"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"}