<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0" />
  <title>Etimuè Bottle Dropper - Gioco Ufficiale Etimuè Pub</title>
  <meta name="description" content="Etimuè Bottle Dropper - Gioco ufficiale del pub Etimuè. Prendi le bottiglie, vinci premi settimanali e mensili!" />

  <!-- PWA -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="manifest" href="/manifest.webmanifest" />
  <meta name="theme-color" content="#1a1a1a" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  

  
<!-- PWA DISABLED FOR CACHE DEBUGGING -->  <script type="module" crossorigin src="/assets/main.js"></script>
  <link rel="stylesheet" href="/assets/index.css">
</head>
<body>
  <div class="container">
    <!-- Hamburger Menu Button -->
    <button class="hamburger-btn" id="hamburger-btn" aria-label="Menu">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <!-- Hamburger Menu Overlay -->
    <div class="hamburger-menu" id="hamburger-menu">
      <div class="hamburger-menu-content">
        <button class="hamburger-close" id="hamburger-close">&times;</button>
        <nav class="hamburger-nav">
          <button class="hamburger-item hamburger-new-game" onclick="startNewGame(); closeHamburgerMenu();" data-i18n="newGame">
            🎮 NUOVA PARTITA
          </button>
          <button class="hamburger-item" onclick="showInstructions(); closeHamburgerMenu();" data-i18n="instructions">
            ❓ Instructions
          </button>
          <button class="hamburger-item" onclick="showPrizes(); closeHamburgerMenu();" data-i18n="prizesButton">
            🏆 Cosa si vince
          </button>
          <button class="hamburger-item" onclick="showLeaderboard(); closeHamburgerMenu();" data-i18n="leaderboard">
            🏅 Classifica
          </button>
          <button class="hamburger-item" id="hamburger-audio-btn" onclick="toggleAudio(); closeHamburgerMenu();">
            🔊 <span data-i18n="audioOn">Audio On</span>
          </button>
          <button class="hamburger-item" id="hamburger-language-btn" onclick="toggleLanguage(); closeHamburgerMenu();">
            🌍 <span id="hamburger-lang-text">IT</span>
          </button>
          <button class="hamburger-item" onclick="showPrivacy(); closeHamburgerMenu();" data-i18n="privacy">
            🔐 Privacy
          </button>
          <button class="hamburger-item" onclick="showTerms(); closeHamburgerMenu();" data-i18n="terms">
            📜 Termini
          </button>
          <button class="hamburger-item hamburger-logout" id="hamburger-logout-btn" onclick="logout(); closeHamburgerMenu();" data-i18n="logout" style="display: none;">
            🚪 Logout
          </button>
        </nav>
      </div>
    </div>

    <div class="header">
      <h1 class="title" data-i18n="title">Etimuè Bottle Dropper</h1>
      <p class="subtitle" data-i18n="subtitle">Catch the falling bottles!</p>
      <span class="version" data-i18n="version">v2.3.1 - Hamburger Menu</span>
    </div>

    <div class="game-container">
      <div id="game-container">
        <!-- Game Start Overlay -->
        <div id="game-start-overlay" class="game-start-overlay">
          <div class="game-start-content">
            <h2 class="game-start-title" data-i18n="gameStartTitle">🎮 Etimuè Bottle Dropper</h2>
            <p class="game-start-subtitle" data-i18n="gameStartSubtitle">Pronto per catturare le bottiglie?</p>
            <button class="game-start-btn" onclick="startNewGame()" data-i18n="gameStartButton">
              ▶️ Nuova Partita
            </button>
          </div>
        </div>
      </div>
      <!-- Mobile Touch Controls -->
      <div class="mobile-controls">
        <button class="touch-btn touch-left" id="touch-left">←</button>
        <button class="touch-btn touch-right" id="touch-right">→</button>
      </div>
    </div>

    <div class="controls">
      <button class="btn btn-primary btn-large" onclick="startNewGame()" data-i18n="newGame">
        🎮 GIOCA
      </button>
      <button id="character-btn" class="btn btn-character" onclick="cycleCharacter()">
        🐱 <span id="character-name">Charlie</span>
      </button>
      <button id="fullscreen-btn" class="btn btn-fullscreen" onclick="toggleFullscreen()" style="display: none;">
        📱 <span id="fullscreen-text">Fullscreen</span>
      </button>
    </div>

    <!-- Newsletter Section -->
    <div id="newsletter-section" class="newsletter-section" style="display: none;">
      <h4 data-i18n="newsletterTitle">Stay Updated!</h4>
      <p data-i18n="newsletterPrizeRequirement">🏆 Subscribe to newsletter to be eligible for weekly and monthly prizes!</p>
      <p data-i18n="newsletterDescription">Subscribe to our newsletter for game updates, events, and special offers from Etimuè pub!</p>
      <div class="newsletter-form">
        <input
          type="email"
          id="newsletter-email"
          data-i18n-placeholder="newsletterEmailPlaceholder"
          placeholder="Enter your email address"
          class="newsletter-input"
        >
        <button id="newsletter-subscribe-btn" class="newsletter-btn" data-i18n="newsletterSubscribeButton">
          Subscribe to Newsletter
        </button>
        <button id="newsletter-verify-btn" class="newsletter-btn newsletter-verify-btn" data-i18n="newsletterVerifyButton">
          ✅ Already Subscribed? Verify
        </button>
      </div>
      <div id="newsletter-message" class="newsletter-message" style="display: none;">
        <span class="newsletter-close" onclick="document.getElementById('newsletter-message').style.display='none'">&times;</span>
      </div>
      <label class="newsletter-consent">
        <input type="checkbox" id="newsletter-consent" required>
        <span data-i18n="newsletterConsentText">I agree to receive marketing communications from Etimuè</span>
      </label>
    </div>

    <div class="footer">
      <p data-i18n="footerMadeBy">Made with ❤️ by Etimuè</p>
      <p><small data-i18n="footerControls">Use arrow keys or mouse to control the character</small></p>
    </div>
  </div>

  <!-- Instructions Modal -->
  <div id="instructions-modal" class="instructions-modal">
    <div class="instructions-content">
      <span class="close-btn" onclick="closeInstructions()">&times;</span>

      <div class="instructions-header">
        <h2 data-i18n="instructionsTitle">🎮 How to Play:</h2>
      </div>

      <div class="instructions-section">
        <h3 data-i18n="instructionsObjective">🎯 Objective: Catch falling bottles with your bucket!</h3>
      </div>

      <div class="instructions-section">
        <h3 data-i18n="instructionsControls">🕹️ Controls:</h3>
        <ul>
          <li data-i18n="instructionsArrowKeys">• Use ← → arrow keys to move</li>
          <li data-i18n="instructionsMouseDrag">• Or click and drag with mouse/touch</li>
          <li data-i18n="instructionsMobileTouch">• On mobile: Use touch controls at bottom</li>
        </ul>
      </div>

      <div class="instructions-section">
        <h3 data-i18n="instructionsRules">🍶 Game Rules:</h3>
        <ul>
          <li data-i18n="instructionsBrownBottles">• Brown bottles: +1 point each</li>
          <li data-i18n="instructionsGreenBottles">• Green bottles: Lose 1 life (unless All Good mode)</li>
          <li data-i18n="instructionsStarPowerups">• ⭐ Star power-ups: Activate All Good mode</li>
          <li data-i18n="instructionsLives">• 💗 You have 3 lives</li>
          <li data-i18n="instructionsTimer">• ⏰ 60 seconds to play</li>
        </ul>
      </div>

      <div class="instructions-section">
        <h3 data-i18n="instructionsTips">🏆 Tips:</h3>
        <ul>
          <li data-i18n="instructionsCatchStars">• Catch star power-ups to avoid green bottle damage</li>
          <li data-i18n="instructionsAllGoodMode">• All Good mode makes green bottles worth +1 point</li>
          <li data-i18n="instructionsHighScore">• Try to get the highest score possible!</li>
        </ul>
      </div>

      <div class="good-luck" data-i18n="instructionsGoodLuck">
        Good luck! 🎮
      </div>
    </div>
  </div>

</body>
</html>